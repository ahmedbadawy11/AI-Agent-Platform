<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AI Agent Platform</title>
  <link rel="stylesheet" href="/static/styles.css" />
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/dompurify@3/dist/purify.min.js"></script>
</head>
<body>
  <div class="app">
    <aside class="panel agents-panel">
      <h1>Agents</h1>
      <section class="list-of-agents">
        <h2>list of agents</h2>
        <ul id="agents-list"></ul>
      </section>
      <section class="add-agent">
        <h2>add a new ai agent</h2>
        <input type="text" id="new-agent-name" placeholder="New agent name" />
        <textarea id="new-agent-prompt" placeholder="New agent prompt (e.g., You are a helpful dental assistant.)" rows="4"></textarea>
        <input type="text" id="new-agent-voice-id" placeholder="ElevenLabs Voice ID (optional)" />
        <button type="button" id="create-agent-btn" class="btn btn-primary">Create Agent</button>
      </section>
      <section class="edit-agent hidden" id="edit-agent-section">
        <h2>edit agent</h2>
        <input type="hidden" id="edit-agent-id" />
        <input type="text" id="edit-agent-name" placeholder="Agent name" />
        <textarea id="edit-agent-prompt" placeholder="Agent prompt" rows="4"></textarea>
        <input type="text" id="edit-agent-voice-id" placeholder="ElevenLabs Voice ID (optional)" />
        <button type="button" id="save-agent-btn" class="btn btn-secondary">Save</button>
        <button type="button" id="cancel-edit-btn" class="btn btn-ghost">Cancel</button>
      </section>
    </aside>
    <main class="panel chat-panel">
      <header class="chat-header">
        <span class="agent-name" id="current-agent-name">â€”</span>
        <div class="session-controls">
          <label>Chat Session:</label>
          <select id="chat-session-select" title="list of chats">
            <option value="">â€” Select chat â€”</option>
          </select>
          <button type="button" id="new-chat-btn" class="btn btn-danger">New Chat</button>
        </div>
      </header>
      <p class="session-info" id="selected-session-info">Selected session: â€”</p>
      <p class="voice-status" id="voice-status">Voice: Click mic to start recording, then click again to send.</p>
      <div class="messages" id="messages"></div>
      <div class="style-row">
        <label for="style-select">Style:</label>
        <select id="style-select" title="Choose response style">
          <option value="">Default</option>
        </select>
        <span class="style-description" id="style-description"></span>
      </div>
      <div class="input-row">
        <input type="text" id="message-input" placeholder="Type your message or use voice..." title="type a message" />
        <button type="button" id="send-btn" class="btn btn-primary" title="send a message">Send</button>
        <button type="button" id="record-btn" class="btn btn-record" title="record an audio and send it">
          <span class="mic-icon">ðŸŽ¤</span> Record
        </button>
      </div>
    </main>
  </div>
  <script>window.marked && (marked.setOptions({ breaks: true }));</script>
  <script src="/static/app.js?v=5"></script>
</body>
</html>
